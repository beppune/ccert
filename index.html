<!DOCTYPE html>
<html>
<head>
	<title>Ciaone</title>
	<link rel="stylesheet" href="bootstrap.min.css" />
	<script src="bootstrap.bundle.min.js"></script>
	<style>
		.w-33 {
			width: 33%;
		}

		.w-19in {
			width: 1280px;
		}
	</style>
	
	<script src="gallery_index.js"></script>
</head>
<body>
	<div class="modal" id="carousel">
		<div class="modal-dialog modal-fullscreen" keyboard>
			<div class="modal-content">
				<div class="modal-body">
					
					<!-- SLIDES -->

					<div id="slides" class="carousel slide">
						<div class="carousel-inner" id="carousel-inner">
							
							<!-- IMAGES PER GALLERY -->

						</div>
						<button class="carousel-control-prev" type="button" data-bs-target="#slides" data-bs-slide="prev">
						  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
						  <span class="visually-hidden">Previous</span>
						</button>
						<button class="carousel-control-next" type="button" data-bs-target="#slides" data-bs-slide="next">
						  <span class="carousel-control-next-icon" aria-hidden="true"></span>
						  <span class="visually-hidden">Next</span>
						</button>
					  </div>

					<!-- /SLIDES-->

				</div>
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Home</button>
			</div>
		</div>
	</div>

	<div id="main" class="container-fluid mx-auto mt-2">
		
	</div>
	<script>

		window.Modal = new bootstrap.Modal(document.getElementById('carousel', { }));;
		
		function gallery(name, count) {
			return { name, count };
		}

		window.addEventListener('load', ()=>{

			const BASE_PATH = 'galleries';
			const GALLERIES = [
				gallery("gallery_1", 3),
				gallery("gallery_2", 3),
				gallery("gallery_3", 3),
				gallery("gallery_4", 3)
			];

			let main = document.getElementById('main');
			main.classList.add('container')
			let row;
			GALLERIES.forEach( (GALLERY, index) => {
				console.log(GALLERY, index);
				const rowindex = index;
				if( rowindex % 3 == 0 ) {
					row = document.createElement('div');
					row.classList.add('row', 'mt-1');
				}

				let img = new Image();
				img.classList.add("w-33");
				img.setAttribute('role','button');
				img.src = `${BASE_PATH}/${GALLERY.name}.jpg`;
				img.addEventListener('click', ()=>{

					let carousel = document.getElementById('carousel-inner');
					
					//Empty previous gallery content
					while (carousel.firstChild) carousel.removeChild(carousel.firstChild);

					
					for (let index = 1; index <= GALLERY.count; index++) {
						let slide = new Image();
						slide.classList.add("w-100");
						slide.src = `${BASE_PATH}/${GALLERY.name}/image_${index}.jpg`;

						//Create container 
						let div = document.createElement('div');
						div.classList.add('carousel-item', 'w-19in');
						if( index == 1) div.classList.add('active');
						div.append(slide);
						carousel.append(div);

					}

					Modal.show();
				});
				row.append(img);
				
				if( rowindex % 3 == 0 ) {

					main.append(row);
				}
			});


		});

	</script>
</body>
</html>